### 久其资产管理云平台架构升级方案第一次评审



> 2019年7月1日 



> 参会人员：欧阳总、吴总、蔡总、张小龙、李全党、孔正亭
地点：亦庄401会议室

#### 领导意见：
- 针对一物多卡的情况，是否考虑强制录入一张卡片；
- 设计原则：暂时放弃一致性原则，需要具体细分业务；
- 资产折旧业务数据流向，把oracle、mysql数据库统一改为DB，系统支持多种数据库；
- 对于公共库主从复制的情况，考虑oracle 、达梦等； mysql支持binlong；
- 对于存储的选择（ 数据库、大数据bigdb、redis、mcat分库分表等），需要精简，选型需要慎重，运维难度要降低（涉及地方实施人员部署、使用）；
- 需要提供实施部署步骤、运维方式； 尽量降低对实施的技术要求；
- 业务拆分原则需要细化；
- 微服务化后，各服务间数据调用策略需要体现；
- 对于折旧、盘点微服务化，需要进一步考虑；
- mycat对于达梦分库分表的支持需要考虑； 对于国产化的相关支持要提前研究；
- 做产品架构，多考虑兼容性问题；

#### 总结：

- 在政府行业去IOE，数据库和中间件国产化的背景下，要考虑的最重要的问题资源层的适配问题上。要很好的适配国产数据库（达梦）。
- 考虑到个性化部署情况是最主要的部署方式，考虑binlog（主从复制）在应用层实现
- 细化核心业务逻辑，**资产处置** | 资产折旧 | 资产盘点 | 资产卡片登记 | 组织人员
- 将国内云平台的差异化考虑到架构设计里。
- 分库分表方案，考虑sharding-JDBC ，Sharding-Sphere。
- 关键问题，解决卡片动态字段的展示问题。



#### 计划：

> 暂定于7月5日 0.3版本评审。





```json
{
  "_index" :   "gams_card_index",
  "_type" :    "tysb",
  "_id" :      "61cd8997-24a2-402b-901c-6ef1ebd7b9f8",
  "_version" : 1,
  "_source" :  {
	"hangyfl": "排气量1.6L(含)及以下轿车",
	"zicmc": "专用豪车：京C·UUC5C",
	"shiyrname": "段康康",
	"jiaz": 1.0738909E7,
	"jixs": "孔先生汽贸公司",
	"pinp": "宾利",
	"qudrq": "Sun Sep 11 10:25:09 CST 2016",
	"kuaijpzh": "45I0BTNG",
	"jiaoysyfx": "社会服务",
	"jiazlx": "暂估值",
	"caiwrzrq": "Tue Aug 01 00:00:00 CST 2017",
	"zhejzt": "提折旧",
	"danj": 1.0738909E7,
	"shul": 1,
	"guigxh": "宾利 2340",
	"beiz": "炫酷豪车",
	"id": "8f927d54-53da-44c2-bcb3-eb8119d8194f",
	"state": "在用",
	"jizrq": "Mon Feb 25 10:25:08 CST 2019",
	"yujsmzl": 2,
	"qudfs": "其他",
	"ruzxs": "已入账",
	"zicfl": "轿车",
	"billcode": "ZS33GC83L0ER",
	"cheph": "京C·UUC5C",
	"shiybmname": "研发一部",
	"objectid": "61cd8997-24a2-402b-901c-6ef1ebd7b9f8",
	"cunfdd": "亦庄四楼西办公区"
  }
}
```

